<div class="user-navbar">
  <!-- Colonna sinistra: navbar content / dropdown -->
  <div class="navbar-content">
    <select [(ngModel)]="selectedCategory">
      <option value="">Tutte le categorie</option>
      @for (cat of categories(); track cat) {
        <option value="{{cat}}">{{cat}}</option>
      }
    </select>
  </div>

  <div class="search-container">
    <input type="text" placeholder="Cerca parola chiave..." [(ngModel)]="searchQuery" />
  </div>
</div>



<ng-container>
  @for (post of filteredPosts; track $index) {
    <div class="post-item mt-3">
      <a [routerLink]="['/details', post.id]" style="color: black; text-decoration: none;">
        <h2>{{ post.title }}</h2>
      </a>

      <!-- tronca il contenuto a 200 caratteri -->
      <p>{{ post.content | slice:0:200 }}{{ post.content.length > 200 ? '...' : '' }}</p>
      <p class="post-category">Categoria: {{ post.category || 'Generale' }}</p>
      <!-- nascondi l'immagine impostando post.image a falsy direttamente nel template -->
      @if (false && post.image) {
        <img
          [src]="post.image"
          alt="Immagine del post"
          style="max-width: 100%; border-radius: 10px; margin-top: 10px;"
        >
      }

      @if (isAdmin) {
        <button
          class="btn btn-danger btn-sm"
          (click)="deletePost(post.id!)"
        >Elimina</button>
      }

      <hr />
    </div>
  }
</ng-container>

