<!-- Banner -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<div class="blog-header">
  <div class="login-top-left">
    <a style="opacity: 0" class="text-button-white" (click)="showLogin = true">Login</a>
  </div>
  <div class="middle-title">
    <h1 class="m-0" style="color: #000000; font-family: 'Anke', serif;">ALICE's BLOG</h1>
  </div>
</div>

<!-- Navbar ricerca post (solo utenti) -->
@if (!isAdmin) {
  <div class="user-navbar">
    <div class="search-container">
      <input
        type="text"
        placeholder="ðŸ” Cerca post..."
        [(ngModel)]="searchQuery"
      />
    </div>
  </div>
}

<!-- Modale Login Admin -->
@if (showLogin) {
  <div class="modal">
    <div class="modal-content">
      <span class="close" (click)="showLogin = false">&times;</span>
      <h2>Login Admin</h2>
      <input type="text" placeholder="Username" [(ngModel)]="username">
      <input type="password" placeholder="Password" [(ngModel)]="password">
      <button class="login-btn" (click)="login()">Accedi</button>
    </div>
  </div>
}

<!-- Form aggiunta post (solo per admin) -->
@if (isAdmin) {
  <div id="create-post" class="mt-3">
    <input
      type="text"
      placeholder="Titolo"
      [(ngModel)]="newPostTitle"
      class="form-control mb-2"
    >
    <textarea
      placeholder="Contenuto"
      [(ngModel)]="newPostContent"
      class="form-control mb-2"
    ></textarea>
    <input
      type="file"
      (change)="onImageSelected($event)"
      class="form-control mb-2"
    >
    <button class="btn btn-success" (click)="addPost()">Aggiungi Post</button>
  </div>
}

<!-- Lista di post filtrata -->
<ng-container>
  @for (post of filteredPosts; track $index) {
    <div class="post-item mt-3">
      <h2>{{ post.title }}</h2>
      <p>{{ post.content }}</p>
      @if (post.image) {
        <img
          [src]="post.image"
          alt="Immagine del post"
          style="max-width: 100%; border-radius: 10px; margin-top: 10px;"
        >
      }
      @if (isAdmin) {
        <button
          class="btn btn-danger btn-sm"
          (click)="deletePost(post.id!)"
        >Elimina</button>
      }
      <hr />
    </div>
  }
</ng-container>
